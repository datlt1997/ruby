<div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3 mt-3">
  <% @posts.each do |post| %>
    <div class="col">
      <div class="card border-0 rounded shadow h-100">

        <%= image_tag(post.image.presence || "no-image.png", size: "400x225", class: "card-img-top", alt: post.title) %>

        <div class="card-body">
          <h5><%= truncate(post.title, length: 60) %></h5>

          <p class="card-text">
            <%= truncate(post.short_description, length: 50) %>
          </p>

          <% if post.tags.any? %>
            <p>
              <% post.tags.limit(3).each do |tag| %>
                <span class="badge bg-secondary"><%= tag.name %></span>
              <% end %>
            </p>
          <% else%>
            <p>
              <span class="badge bg-secondary">NO TAG</span>
            </p>
          <% end %>

          <div class="d-flex justify-content-between align-items-center">
            <div class="btn-group">
              <%= link_to "View", post_path(post), class: "btn btn-sm btn-outline-secondary" %>

               <span class="ms-2">
                <%= icon('fa-solid', 'eye') %>
                <%= post.views_count || 0 %>
              </span>
            </div>           
            <small class="text-muted"><%= time_ago_in_words(post.created_at) %> ago</small>
          </div>
        </div>
      </div>
    </div>
  <% end %>
  <div class="mt-4 mx-auto">
    <%= paginate @posts %>
  </div>
</div>
